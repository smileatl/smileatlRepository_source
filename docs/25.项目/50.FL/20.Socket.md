---
title: Socket
date: 2023-08-11 11:33:32
permalink: /pages/7bded3/
categories:
  - 项目
  - FL
tags:
  - 
author: 
  name: smileatl
  link: https://github.com/smileatl
---
# Socket

在Python中，`socket` 是一个内置的标准库，用于网络通信。它提供了实现各种网络协议（如TCP、UDP）的功能，使得开发者可以通过网络进行数据传输和通信。

使用 `socket` 库，您可以创建客户端和服务器端应用程序，实现网络通信的各个方面，包括建立连接、发送和接收数据等操作。以下是一些常用的 `socket` 方法：

1. `socket()`：创建一个新的套接字对象。您可以指定地址族（如IPv4或IPv6）、套接字类型（如流式套接字或数据报套接字）以及协议类型（如TCP或UDP）。

2. `bind(address)`：将套接字绑定到指定的地址和端口号。对于服务器端应用程序，这将用于监听指定的地址并接受客户端连接。

3. `listen(backlog)`：在服务器端套接字上开始监听传入的连接请求。`backlog` 参数指定排队等待的最大连接数。

4. `accept()`：在服务器端套接字上接受传入的连接请求，并返回一个新的套接字对象，用于与客户端进行通信。

5. `connect(address)`：在客户端套接字上尝试与指定的地址和端口号建立连接。

6. `send(data)`：向已连接的套接字发送数据。

7. `recv(buffer_size)`：从套接字接收数据，并返回接收到的数据。

8. `close()`：关闭套接字连接。

这只是 `socket` 提供的一小部分方法示例，更多详细的方法和选项可以在官方文档中找到。使用 `socket` 库时，您需要根据具体情况选择合适的方法来实现所需的网络通信功能。

对于服务器端应用程序，通常会创建一个监听套接字并等待客户端连接。一旦建立连接，就会创建一个新的套接字与客户端进行通信。而客户端应用程序则会尝试与服务器建立连接，并通过套接字进行数据传输。





## 服务端

首先，我们将创建一个简单的服务器端，它会监听一个特定的端口，等待客户端连接并接收消息。然后，我们将创建一个客户端，连接到服务器并发送消息。

**服务器端代码：**

```python
import socket

# 创建套接字对象
server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

# 绑定地址和端口
server_address = ('127.0.0.1', 12345)
server_socket.bind(server_address)

# 开始监听
server_socket.listen(1)

print("等待客户端连接...")
client_socket, client_address = server_socket.accept()

print(f"已连接客户端：{client_address}")

# 接收消息并发送回应
while True:
    data = client_socket.recv(1024)
    if not data:
        break
    message = data.decode('utf-8')
    print(f"收到消息：{message}")
    response = f"你好，我已收到你的消息：{message}"
    client_socket.sendall(response.encode('utf-8'))

# 关闭连接
client_socket.close()
server_socket.close()
```

## 客户端

**客户端代码：**

```python
import socket

# 创建套接字对象
client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

# 连接服务器
server_address = ('127.0.0.1', 12345)
client_socket.connect(server_address)

# 发送消息并接收回应
while True:
    message = input("请输入消息（输入 'exit' 退出）: ")
    client_socket.sendall(message.encode('utf-8'))
    if message == 'exit':
        break
    data = client_socket.recv(1024)
    response = data.decode('utf-8')
    print(f"收到回应：{response}")

# 关闭连接
client_socket.close()
```



## 分析

在上述代码中，服务器端创建了一个套接字对象，绑定了地址和端口，然后开始监听传入的连接请求。一旦有客户端连接进来，它接受连接并与客户端通信，接收消息并发送回应。

客户端创建了一个套接字对象，并尝试连接到服务器。然后，它可以输入消息并将其发送到服务器，等待接收服务器的回应。

